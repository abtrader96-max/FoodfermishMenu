<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase Connection Test</title>
</head>
<body>
    
    <h1>Supabase Connection Test</h1>
    <p>Check the browser's **Developer Console (F12)** for the connection status and fetched data.</p>
    
    <div id="status">Attempting connection...</div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script>
        
        // üö® STEP 1: REPLACE THESE PLACEHOLDERS WITH YOUR ACTUAL KEYS!
        const SUPABASE_URL = 'https://jbhrditswngtnocsnyhj.supabase.co'; 
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpiaHJkaXRzd25ndG5vY3NueWhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUwMDMwMzgsImV4cCI6MjA4MDU3OTAzOH0.TQBG6PRldFh280By-o8o8kuyyPoAu9n4pXpfC6i3ZUg'; 
        
        // üö® STEP 2: REPLACE THIS WITH THE ACTUAL NAME OF YOUR TABLE
        const TABLE_NAME = 'Menu'; 
        const API_ENDPOINT = `${SUPABASE_URL}/rest/v1/${TABLE_NAME}?select=*`;
        // 2. Initialize the Supabase Client
        //alert supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        const statusElement = document.getElementById('status');

        const dataList = document.getElementById('data-list');
        dataList.innerHTML = '<li>Fetching data via REST API...</li>';
        /**
         * Function to test the connection by fetching one row of data.
         */
        async function testConnection() {
            console.log("--- Supabase Connection Test Started ---");
            console.log("URL:", SUPABASE_URL);

            statusElement.innerHTML = `Connecting to ${TABLE_NAME}...`;

            try {
                const response = await fetch(API_ENDPOINT, {
                      method: 'GET',
                      headers: {
                     // Must pass the key in two different formats
                     'apikey': SUPABASE_ANON_KEY,
                     'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
                     'Content-Type': 'application/json'
                  }
                  });

                const result = await response.json();
            
                // --- Success: Display Data ---
               dataList.innerHTML = ''; 

        if (result.length === 0) {
            dataList.innerHTML = '<li>No data found.</li>';
        } else {
            console.log('‚úÖ Data Fetched Successfully:', result);
            result.forEach(item => {
                const li = document.createElement('li');
                // Adjust the property names (e.g., item.name, item.value) based on your table columns
                li.textContent = `${item.name} (Value: ${item.price})`; 
                dataList.appendChild(li);
            });
        }

            } catch (e) {
                alert(e);
                // General Network/Configuration Error
                console.error("Fatal Connection Error:", e);
                statusElement.innerHTML = `<span style="color: red;">‚ùå FATAL ERROR: Check Console for network or configuration issues.</span>`;
            }
        }

        // Run the test after the page loads
        document.addEventListener('DOMContentLoaded', testConnection);
    </script>

</body>
</html>
