<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supabase Connection Test</title>
</head>
<body>
    
    <h1>Supabase Connection Test</h1>
    <p>Check the browser's **Developer Console (F12)** for the connection status and fetched data.</p>
    
    <div id="status">Attempting connection...</div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script>
        // script.js - Using the Fetch API directly

// üö® STEP 1: REPLACE THESE PLACEHOLDERS
const SUPABASE_URL = "https://jbhrditswngtnocsnyhj.supabase.co"
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpiaHJkaXRzd25ndG5vY3NueWhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUwMDMwMzgsImV4cCI6MjA4MDU3OTAzOH0.TQBG6PRldFh280By-o8o8kuyyPoAu9n4pXpfC6i3ZUg'; 
const TABLE_NAME = 'Menu'; 

// 2. Construct the full REST API endpoint URL
// The format is: [Project URL]/rest/v1/[table name]?select=*
const API_ENDPOINT = `${SUPABASE_URL}/rest/v1/${TABLE_NAME}?select=*`;
alert("28");
/**
 * Function to Fetch and Display Data using the standard browser fetch API.
 */
async function fetchDataDirectly() {
    const dataList = document.getElementById('data-list');
    dataList.innerHTML = '<li>Fetching data via REST API...</li>';

    try {
        const response = await fetch(API_ENDPOINT, {
            method: 'GET',
            headers: {
                // Must pass the key in two different formats
                'apikey': SUPABASE_ANON_KEY,
                'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
                'Content-Type': 'application/json'
            }
        });

        const result = await response.json();
        alert(result);
        if (!response.ok) {
            // Check for API errors (e.g., status 401, 403, 406)
            console.error('‚ùå API Error Response:', result);
            dataList.innerHTML = `<li style="color: red;">API Error (${response.status}): ${result.message || 'Unknown error'}. Check Console.</li>`;
            return;
        }

        // --- Success: Display Data ---
        dataList.innerHTML = ''; 

        if (result.length === 0) {
            dataList.innerHTML = '<li>No data found.</li>';
        } else {
            console.log('‚úÖ Data Fetched Successfully:', result);
            result.forEach(item => {
                const li = document.createElement('li');
                // Adjust the property names (e.g., item.name, item.value) based on your table columns
                li.textContent = `${item.name} (Value: ${item.value})`; 
                dataList.appendChild(li);
            });
        }

    } catch (e) {
        console.error("Fatal Network/CORS Error:", e);
        dataList.innerHTML = `<li style="color: red;">‚ùå FATAL ERROR: Cannot reach API. Check network and CORS.</li>`;
    }
}

document.addEventListener('DOMContentLoaded', fetchDataDirectly);
    </script>

</body>
</html>
